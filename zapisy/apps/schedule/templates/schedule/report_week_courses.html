{% extends 'schedule/events_report.html' %}
{% load render_bundle from webpack_loader %}
{% load schedule_filters %}
{% load staticfiles %}

{% block events_report %} class="active"{% endblock %}

{% block bread %}
    <li class="breadcrumb-item"><a href="{% url 'main-page' %}">Strona główna</a></li>
    <li class="breadcrumb-item"><a href="{% url 'events:classrooms' %}">Sale</a></li>
    <li class="breadcrumb-item"><a href="{% url 'events:events_report' %}">Raport</a></li>
    <li class="breadcrumb-item active" aria-current="page">Raport tygodniowy</li>
{% endblock %}

{% block reporttitle %}{% endblock %}

{% block all-content %}
  <div class='mb-5 d-print-none'>
      <a class="btn btn-light print-report float-right">
          <i class="fa fa-print"></i>
          Drukuj
      </a>
  </div>
  <style>
      #room_terms_id {
        font-size: 6.3mm;
      }
      @page {
        margin: 0.5cm 2cm 2cm 2cm;
      }
      @media print {
        footer { page-break-after: always; }
        .ct-app { display: none; }
      }
      ul {
        list-style-type: none;
        padding: 0;
      }
      header #logo_id {
        
        width: 280px;
        filter: invert(1);
      }
      header #semester_id {
      }
      h3 {
        margin-bottom: 1cm;
        font-size: 6.6mm;
        font-weight: bold;
      }
      dt { 
        clear: both;
        width: 120px;
        display: inline-block;
      }
      dd {
        display: inline; 
      }
  </style>

  {% for room, terms_list in events %}
    <div class="report-page py-5">
      <header class="d-flex justify-content-between">
        <h2 class="display-3 my-3">Semestr {{ semester.get_type_display }} &mdash; {{ semester.year }}</h2>
        <img src="{% static 'images/logo_UWr.svg' %}" id="logo_id" alt="uwrlogo" align="right">
      </header>
      <h1 class="display-1">{{ room.number }}</h1>
      <section data-editable data-name="report-page-{{ room }}" id="room_terms_id">
          {% for term in terms_list %}
            <p>
              <strong>{{term.dayOfWeek|number_to_weekday}} {{term.start_time|time:'G'}}&ndash;{{term.end_time|time:'G'}}</strong>
                {% with term.group.course.name.strip as evt_title %}
                    {% if evt_title|length > 0 %}
                      {{ evt_title|upper }}
                    {% else %}
                      &lt;brak nazwy&gt;
                    {% endif %}
                  {% endwith %}
                  {% with term.group.human_readable_type as evt_type %}
                    {% if evt_type|length > 0 %}
                      ({{ evt_type|lower }})
                    {% endif %}
                {% endwith %}
                {{term.group.teacher|upper}}
              
            </p>
          {% endfor %}
        </div>
      </section>
      <footer></footer>
  {% endfor %}
{% endblock %}


{% block rendered_bundles %}
    {% render_bundle "schedule-report" %}
    {% render_bundle "schedule-report-editor" %}
{% endblock %}

