{% extends 'schedule/events_report.html' %}
{% load render_bundle from webpack_loader %}
{% load schedule_filters %}

{% block events_report %} class="active"{% endblock %}

{% block bread %}
    <li class="breadcrumb-item"><a href="{% url 'main-page' %}">Strona główna</a></li>
    <li class="breadcrumb-item"><a href="{% url 'events:classrooms' %}">Sale</a></li>
    <li class="breadcrumb-item"><a href="{% url 'events:events_report' %}">Raport</a></li>
    <li class="breadcrumb-item active" aria-current="page">Raport tygodniowy</li>
{% endblock %}

{% block reporttitle %}{% endblock %}

{% block reportformview %}
  <div class='mb-5 d-print-none'>
      <a class="btn btn-light print-report float-right">
          <i class="fa fa-print"></i>
          Drukuj
      </a>
  </div>
  <style>
      #room_terms_id {
        font-size: 6.3mm;
      }
      @page {
        margin: 0.5cm 2cm 2cm 2cm;
      }
      @media print {
        footer {page-break-after: always;}
      }
      header {
        min-height: 4cm;
        text-align: bottom;
        position: relative;
        margin-bottom: 1cm;
      }
      ul {
        list-style-type: none;
        padding: 0;
      }
      header #logo_id {
        position: absolute;
        bottom: 0cm;
        right: 1cm;
        height: 121.8px;
        width: 280px;
      }
      header #semester_id {
        position: absolute;
        bottom: 0cm;
        left: 1cm;
        font-size: 5.7mm;
      }
      h3 {
        margin-bottom: 1cm;
        font-size: 6.6mm;
        font-weight: bold;
      }
  </style>

  {% for room, terms_list in events %}
    <header>
      <img src="/static/images/report_logo.jpg" id="logo_id" alt="uwrlogo" align="right">
      <div id="semester_id">semestr {{ semester.get_type_display }} r. ak. {{ semester.year }}</div>
    </header>
    <div id="room_terms_id">
      <h3>{{ room }}</h3>
      {% if terms_list %}
        <ul>
          {% for term in terms_list %}
            <li>{{term.dayOfWeek|number_to_weekday}} {{term.start_time|time:'G'}}-{{term.end_time|time:'G'}}
              {% with term.group.course.name.strip as evt_title %}
                  {% if evt_title|length > 0 %}
                    {{ evt_title|upper }}
                  {% else %}
                    &lt;brak nazwy&gt;
                  {% endif %}
                {% endwith %}
                {% with term.group.human_readable_type as evt_type %}
                  {% if evt_type|length > 0 %}
                    ({{ evt_type|lower }})
                  {% endif %}
                {% endwith %}
                {{term.group.teacher|upper}}
            </li>
          {% endfor %}
        </ul>
        {% endif %}
      </div>
      <footer></footer>
  {% endfor %}
{% endblock %}


{% block rendered_bundles %}
    {% render_bundle "schedule-report" %}
{% endblock %}

