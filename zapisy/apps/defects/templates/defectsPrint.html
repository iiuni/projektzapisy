{% load static %}
{% load render_bundle from webpack_loader %}

<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ListaUsterek{% now "Y-m-d:H:i" %}</title>
    <meta name="description" content="System obsługi cyklu dydaktycznego Instytut Informatyki Uniwersytetu Wrocławskiego">

    <link rel="shortcut icon" href="{% static 'common/images/favicon.ico' %}">
    {% render_bundle "common-main" %}
</head>
<body>
    <div class="d-flex justify-content-between align-items-center" style="width: 100%;">
        <h1 class="d-inline-block" style="text-align: center !important; width: 100%;">
             Usterki
        </h1>
    </div>
    <table class="table table-striped">
        <thead>
        <tr id="headers">
            <th scope="col" class="text-center az" data-defaultsign="nospan">Nazwa</th>
            <th scope="col" class="text-center">Zgłoszona przez</th>
            <th scope="col" class="text-center">Miejsce</th>
            <th scope="col" class="text-center">Stan</th>
            <th scope="col" class="text-center">Data</th>
        </tr>
        </thead>
            <tbody>
            {% for defect in defects %}
                <tr id="{{ defect.id }}">
                    <td class="text-center"> {{ defect.name }} </td>
                    <td class="text-center"> {{ defect.reporter.first_name }} {{ defect.reporter.last_name}} </td>
                    <td class="text-center">{{ defect.place }}</td>
                    <td class="text-center" style="{{ defect.get_status_color }}">{{ defect.get_state_display }}</td>
                    <td class="text-center">{{ defect.creation_date }}</td>
                </tr>
                {% if defect.description != "" or defect.information_from_defect_manager != "" %}
                    <tr>
                        <td class="text" colspan="5" style="word-break: break-all">
                            <div>{{ defect.description|linebreaksbr }}</div>
                            {% if defect.information_from_defect_manager != "" %}
                                <div><b>Informacja o zmianach:</b> {{ defect.information_from_defect_manager|linebreaksbr }}</div>
                            {% endif %}
                        </td>
                    </tr>
                {% else %}
                    <tr style="display:none;"></tr>
                {% endif %}
            {% endfor %}
            </tbody>
    </table>
</body>

<script>
    window.print()
</script>

<style>

</style>