general:
  build_dir: zapisy

machine:
  pre:                                                                                                                                                                   
    - sudo add-apt-repository -y ppa:jonathonf/python-3.6
    - sudo apt-get -y update
    - sudo apt-get -y install python3.6
    - sudo ln -s /usr/bin/python3.6 /usr/bin/python -f

dependencies:
  override:
    - pip install --upgrade pip
    - pip install -r requirements.test.txt

test:
  pre:
    - cp ../env/settings_local_test.py settings_local.py
  override:
    - mkdir logs
    # - python manage.py test test_app --nomigrations
    - coverage run manage.py test test_app --nomigrations
    - coverage run manage.py test apps.news.tests --nomigrations
    - coverage run manage.py test apps.schedule --nomigrations
    - coverage run manage.py test apps.enrollment.courses --nomigrations
    - coverage run manage.py test apps.enrollment.records.tests --nomigrations
    - coverage run manage.py test apps.grade.poll --nomigrations
    - coverage run manage.py test apps.users --nomigrations
  post:
    - coverage html -d $CIRCLE_ARTIFACTS
